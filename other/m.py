import matplotlib.pyplot as plt
from collections import Counter

# Timestamp data
timestamps = ["2024-04-18 07:27", "2024-04-18 07:26", "2024-04-17 18:22", "2024-04-17 18:22",
                      "2024-04-17 17:51", "2024-04-17 17:12", "2024-04-17 16:32", "2024-04-17 16:26",
                      "2024-04-17 16:26", "2024-04-15 11:18", "2024-04-15 11:18", "2024-04-15 06:38",
                      "2024-04-15 06:38", "2024-04-13 05:08", "2024-04-13 05:08", "2024-04-12 14:10",
                      "2024-04-12 14:10", "2024-04-12 08:36", "2024-04-12 08:36", "2024-04-12 06:05",
                      "2024-04-09 13:28", "2024-04-09 13:28", "2024-04-08 05:58", "2024-03-28 07:39",
                      "2024-03-28 07:39", "2024-03-28 04:50", "2024-03-28 04:50", "2024-03-24 07:10",
                      "2024-03-21 12:24", "2024-03-21 12:24", "2024-03-20 16:19", "2024-03-19 17:44",
                      "2024-03-18 10:49", "2024-03-18 10:49", "2024-03-17 08:23", "2024-03-16 13:51",
                      "2024-03-15 15:54", "2024-03-12 17:16", "2024-03-11 08:11", "2024-03-08 07:15",
                      "2024-03-07 10:40", "2024-03-07 05:30", "2024-03-07 05:30", "2024-03-05 15:32",
                      "2024-03-01 13:13", "2024-03-01 07:11", "2024-03-01 07:11", "2024-03-01 05:58",
                      "2024-02-28 12:01", "2024-02-28 12:01", "2024-02-28 12:01", "2024-02-25 04:48",
                      "2024-02-25 04:44", "2024-02-25 04:44", "2024-02-25 04:44", "2024-02-23 12:31",
                      "2024-02-23 06:09", "2024-02-19 13:00", "2024-02-19 13:00", "2024-02-19 07:14",
                      "2024-02-18 15:29", "2024-02-18 07:51", "2024-02-17 16:20", "2024-02-15 07:36",
                      "2024-02-14 08:47", "2024-02-09 07:33", "2024-02-09 07:33", "2024-02-08 19:51",
                      "2024-02-08 07:43", "2024-02-01 07:26", "2024-02-01 07:26", "2024-02-01 07:00",
                      "2024-02-01 07:00", "2024-01-29 05:25", "2024-01-29 05:25", "2024-01-27 09:41",
                      "2024-01-27 09:41", "2024-01-27 08:15", "2024-01-21 09:56", "2024-01-21 09:56",
                      "2024-01-18 16:08", "2023-12-23 04:36", "2023-12-22 19:37", "2023-12-21 07:26",
                      "2023-12-21 07:26", "2023-12-21 06:50", "2023-12-21 06:50", "2023-12-19 09:48",
                      "2023-12-13 14:31", "2023-12-13 14:31", "2023-12-10 11:04", "2023-12-10 11:04",
                      "2023-12-10 06:46", "2023-12-01 06:31", "2023-11-27 14:55", "2023-11-25 06:46",
                      "2023-11-25 06:42", "2023-11-25 06:42", "2023-11-25 05:05", "2023-11-23 17:21",
                      "2023-11-23 17:20", "2023-11-23 17:18", "2023-11-23 17:18", "2023-11-23 17:15",
                      "2023-11-23 17:13", "2023-11-23 16:36", "2023-11-23 16:36", "2023-11-23 16:16",
                      "2023-11-23 16:16", "2023-10-24 14:36", "2023-10-05 16:01", "2023-10-05 16:01",
                      "2023-10-05 15:05", "2023-09-26 15:55", "2023-09-26 15:54", "2023-09-24 04:04",
                      "2023-09-24 04:04", "2023-09-15 04:56", "2023-09-15 04:56", "2023-09-08 06:11",
                      "2023-09-08 06:11", "2023-09-04 18:39", "2023-08-29 08:06", "2023-08-29 08:06",
                      "2023-08-23 12:31", "2023-08-23 12:30", "2023-08-04 11:22", "2023-08-04 11:22",
                      "2023-08-04 11:20", "2023-08-04 11:20", "2023-08-04 11:08", "2023-08-04 11:08",
                      "2023-08-04 08:16", "2023-08-04 07:33", "2023-08-02 09:27", "2023-08-02 09:27",
                      "2023-05-21 09:47", "2023-05-13 05:47", "2023-05-13 05:47", "2023-05-13 05:47",
                      "2023-05-13 05:47", "2023-05-13 05:45", "2023-05-13 05:45", "2023-05-11 13:52",
                      "2023-05-11 05:12", "2023-05-08 02:45", "2023-04-13 07:29", "2023-01-27 04:54",
                      "2022-10-19 10:35", "2016-06-02 06:20"]
        

# Function to convert timestamp to quarter-hour
def timestamp_to_quarter_hour(ts):
    hour, minute = map(int, ts.split()[1].split(":"))
    return hour + minute / 60

# Convert each timestamp to quarter-hour
quarter_hours = [timestamp_to_quarter_hour(ts) for ts in timestamps]

# Count occurrences of each quarter-hour
quarter_hour_counts = Counter(quarter_hours)

# Sort by quarter-hour for plotting
quarter_hour_counts = dict(sorted(quarter_hour_counts.items()))

# Plotting
plt.figure(figsize=(15, 6))
plt.bar(quarter_hour_counts.keys(), quarter_hour_counts.values(), color='skyblue', width=0.03)
plt.xlabel('Hour of the Day')
plt.ylabel('Frequency')
plt.title('Frequency of Timestamps by Quarter of the Hour')
plt.xticks(range(0, 24), labels=[f'{i}:00' for i in range(24)], rotation=90)
plt.grid(axis='y', linestyle='--', alpha=0.7)
plt.show()
